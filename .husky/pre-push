#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Verificar se est√° fazendo push de tag
# Se sim, validar que est√° na main e vers√µes est√£o corretas
TAG_BEING_PUSHED=$(git rev-parse --verify --quiet "$1" 2>/dev/null || echo "")

if [ -n "$TAG_BEING_PUSHED" ]; then
  # √â um push de tag
  TAG_NAME=$(git describe --tags --exact-match 2>/dev/null || echo "")
  
  if [[ $TAG_NAME =~ ^v[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
    echo "üè∑Ô∏è  Push de tag detectado: $TAG_NAME"
    ./scripts/validate-tag.sh "$TAG_NAME"
  fi
fi

